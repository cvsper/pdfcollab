<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Copy Link Feature</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-md mx-auto bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-bold mb-4">Test Copy Link Feature</h2>
        
        <p class="text-gray-600 mb-4">Click the button below to test the copy link functionality:</p>
        
        <div class="flex items-center space-x-2">
            <button type="button" 
                    class="px-3 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded">
                Send Invite
            </button>
            <button type="button" 
                    class="px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded"
                    onclick="copyInvitationLink('http://localhost:5000/user2/test-document-123')"
                    title="Copy invitation link">
                <i class="fas fa-copy mr-1"></i>Copy Link
            </button>
        </div>
        
        <div class="mt-6 p-4 bg-gray-50 rounded">
            <p class="text-sm text-gray-600"><strong>Test URL:</strong> http://localhost:5000/user2/test-document-123</p>
            <p class="text-sm text-gray-500 mt-2">After clicking "Copy Link", this URL should be copied to your clipboard.</p>
        </div>
    </div>

    <script>
        // Copy invitation link to clipboard
        function copyInvitationLink(url) {
            navigator.clipboard.writeText(url).then(function() {
                // Show success message
                showCopyMessage('Link copied to clipboard!', 'success');
            }).catch(function(err) {
                // Fallback for older browsers
                try {
                    const textArea = document.createElement('textarea');
                    textArea.value = url;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showCopyMessage('Link copied to clipboard!', 'success');
                } catch (e) {
                    showCopyMessage('Failed to copy link. Please try again.', 'error');
                }
            });
        }

        // Show copy message notification
        function showCopyMessage(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50 text-sm font-medium transition-all duration-300 ${
                type === 'success' 
                    ? 'bg-green-100 border border-green-200 text-green-800' 
                    : 'bg-red-100 border border-red-200 text-red-800'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} mr-2"></i>
                    ${message}
                </div>
            `;
            
            // Add to page
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateY(0)';
                notification.style.opacity = '1';
            }, 10);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateY(-100%)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>